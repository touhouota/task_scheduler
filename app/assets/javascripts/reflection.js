!function(n){var a={};function o(t){if(a[t])return a[t].exports;var e=a[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=n,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/Users/touhouota/Dropbox/Program/5_master/rails/task_scheduler/app/assets/javascripts",o(o.s=28)}({1:function(t,e,n){"use strict";var a={finish_status:[2,3],form_element_to_object:function(t){for(var e=t.querySelectorAll("input, select, textarea"),n=[].slice.call(e),a=n.length,o={},r=0;r<a;r++)o[n[r].name]=n[r].value;return o},createFormData:function(t){var e;return(e=t?new FormData(t):new FormData).append("user_id",a.get_cookie("user_id")),e},get_path:function(){for(var t=location.pathname.split("/");3<t.length;)t.pop();return t.join("/")},get_token:function(){return document.querySelector("[name=csrf-token]").content},get_cookie:function(t){var e={},n=document.cookie;if(0!==n.length)for(var a=n.split(";"),o=a.length,r=0;r<o;r++){var c=a[r].split("=");0!==c[1].length?e[c[0].trim()]=c[1]:e[c[0].trim()]=null}return t?e[t]?e[t]:null:e},parents:function(t,e){var n=[],a=t;if(t.classList.contains(e))return t;for(;a.parentElement;){if((a=a.parentElement).classList.contains(e))return a;n.push(a)}return n},round_at:function(t,e){var n=Math.pow(10,Number(e)),a=Number(t);return Math.round(a*n)/n},format_ymd:function(t){return[t.getFullYear(),"00".concat(t.getMonth()+1).slice(-2),"00".concat(t.getDate()).slice(-2)].join("-")},format_hms:function(t){return t.toTimeString().split(" ").shift()}};e.a=a},28:function(t,e,n){"use strict";n.r(e);var a,o=n(8),r=n(1),c={drawPage:function(t){c.__init(t),c.__getGraphData()},redraw:function(){o.a.values||c.__getGraphData(),c.__drawGraph()},__init:function(t){o.a.init(t)},__getGraphData:function(){var t=r.a.get_cookie("user_id"),e="".concat(r.a.get_path(),"/api/individual/").concat(t);fetch(e).then(function(t){return t.json()}).then(function(t){c.__drawGraph(t.task_info),c.__setLabelValue(t.task_info),c.__setAchiveRate(t.achieve),c.__setTotalActualTime(t.actual_secs)})},__drawGraph:function(t){o.a.setValue(t),o.a.setLabel(["survay","develop","experiment","write"]),o.a.draw()},__setLabelValue:function(n){var a=0;Object.values(n).forEach(function(t){a+=t});["survay","develop","experiment","write"].forEach(function(t){var e=r.a.round_at(n[t]/a*100,1);Number.isNaN(e)&&(e=0),document.getElementById(t).querySelector(".value").textContent=e})},__setAchiveRate:function(t){var e=0;Object.values(t).forEach(function(t){e+=t});var n=r.a.round_at(t[2]/e*100,1);document.getElementById("achieve").querySelector(".value").textContent=n},__setTotalActualTime:function(t){var e=Math.round(t/60),n=Math.round(e/60);e-=60*n;var a=Math.round(n/24);n-=24*a;var o="".concat(e,"分");0<n&&(o="".concat(n,"時間 ").concat(o)),0<a&&(o="".concat(a,"日 ").concat(o)),document.getElementById("work_time").querySelector(".value").textContent=o}},i=c,u=n(5);window.onload=function(){i.drawPage("graph"),a=0,window.addEventListener("resize",function(){0<a&&clearTimeout(a),a=setTimeout(function(){i.redraw()})}),document.getElementById("task_list").addEventListener("click",u.a.taskList),document.getElementById("github").addEventListener("click",u.a.github),document.getElementById("logout").addEventListener("click",u.a.logout)}},3:function(t,e,n){"use strict";var a=n(1),o={init:function(){var t=document.createElement("div");t.addEventListener("click",o.closeModal),t.classList.add("modal_back"),document.body.appendChild(t)},backgroundClose:function(){var t=document.querySelector(".modal_back");document.body.removeChild(t)},closeModal:function(){o.backgroundClose(),document.getElementById("modal_area").classList.add("hide"),document.querySelector(".modal").reset()},showModal:function(){o.init(),document.getElementById("modal_area").classList.remove("hide")},getModalBack:function(){return document.querySelector(".modal_back")},getModalData:function(t){var e=new FormData(t);return e.append("user_id",a.a.get_cookie("user_id")),e.append("authenticity_token",a.a.get_token()),e},isModalOpen:function(){return Boolean(o.getModalBack())}};e.a=o},5:function(t,e,n){"use strict";var a=n(3),o=n(1),r={appendTask:function(){a.a.showModal()},members:function(){a.a.init();var t=document.querySelector(".members_status");t.classList.remove("hide"),a.a.getModalBack().addEventListener("click",function(){t.classList.add("hide")})},reflection:function(){var t=o.a.get_path(),e=o.a.get_cookie("user_id");window.location.href="".concat(t,"/reflection/individual/").concat(e)},checklist:function(){var t=o.a.get_path(),e=o.a.get_cookie("user_id");window.location.href="".concat(t,"/report/list/").concat(e)},github:function(){window.open("https://github.com/touhouota/task_scheduler/issues","_blank")},logout:function(){var t=o.a.get_cookie("user_id"),e=new Date;e.setFullYear(e.getFullYear()-2);var n=["user_id=".concat(t),"path=".concat(o.a.get_path()),"expires=".concat(e.toUTCString())];document.cookie=n.join(";");var a=o.a.get_path();window.location.href="".concat(a)},taskList:function(){var t=o.a.get_path(),e=o.a.get_cookie("user_id");window.location.href="".concat(t,"/structure/main/").concat(e)}};e.a=r},8:function(t,e,n){"use strict";var l=n(1),s={canvas:null,context:null,values:{},init:function(t){s.canvas=document.getElementById(t),s.context=s.canvas.getContext("2d"),s.setInitialCanvasSize()},setInitialCanvasSize:function(){var t=s.canvas,e=t.clientWidth,n=t.clientHeight;t.setAttribute("width",e.toString()),t.setAttribute("height",n.toString())},setValue:function(t){s.values=t},setLabel:function(t){s.labels=t},normalizeLabelValue:function(){s.labels.forEach(function(t){void 0===s.values[t]&&(s.values[t]=0)})},draw:function(){if(s.values&&s.labels){s.normalizeLabelValue();var t=s.canvas,n=s.context,e=(t.width,t.height),a=s.__getScale(),o=s.values,r=360/Object.values(o).length,c=.9*e,i=e*l.a.round_at(1-.9,1)/2,u=0;s.labels.forEach(function(t,e){n.fillStyle="hsl(".concat(r*e,", 100%, 60%)"),n.fillRect(u,i,o[t]*a,c),u+=o[t]*a})}},test:function(){s.context.moveTo(10,10),s.context.lineTo(90,90),s.context.stroke(),s.setValue({a:10,b:20}),s.draw([])},__getScale:function(){var t=Object.values(s.values),e=0;return t.forEach(function(t){e+=t}),s.canvas.width/e}};e.a=s}});