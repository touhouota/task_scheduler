!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/Users/touhouota/Dropbox/Program/5_master/rails/task_scheduler/app/assets/javascripts",n(n.s=34)}({1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={finish_status:[2,3],form_element_to_object:function(e){for(var t=e.querySelectorAll("input, select, textarea"),n=[].slice.call(t),a=n.length,o={},u=0;u<a;u++)o[n[u].name]=n[u].value;return o},createFormData:function(e){var t=void 0;return(t=e?new FormData(e):new FormData).append("user_id",a.get_cookie("user_id")),t},get_path:function(){for(var e=location.pathname.split("/");e.length>3;)e.pop();return e.join("/")},get_token:function(){return document.querySelector("[name=csrf-token]").content},get_cookie:function(e){var t={},n=document.cookie;if(0!==n.length)for(var a=n.split(";"),o=a.length,u=0;u<o;u++){var r=a[u].split("=");0!==r[1].length?t[r[0].trim()]=r[1]:t[r[0].trim()]=null}return e?t[e]?t[e]:null:t},parents:function(e,t){var n=[],a=e;if(e.classList.contains(t))return e;for(;a.parentElement;){if((a=a.parentElement).classList.contains(t))return a;n.push(a)}return n},round_at:function(e,t){var n=Math.pow(10,Number(t)),a=Number(e);return Math.round(a*n)/n},format_ymd:function(e){return[e.getFullYear(),("00"+(e.getMonth()+1)).slice(-2),("00"+e.getDate()).slice(-2)].join("-")},format_hms:function(e){return e.toTimeString().split(" ").shift()}};t.default=a},20:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(1),u=(a=o)&&a.__esModule?a:{default:a};var r={canvas:null,context:null,values:{},init:function(e){r.canvas=document.getElementById(e),r.context=r.canvas.getContext("2d"),r.setInitialCanvasSize()},setInitialCanvasSize:function(){var e=r.canvas,t=e.clientWidth,n=e.clientHeight;e.setAttribute("width",t.toString()),e.setAttribute("height",n.toString())},setValue:function(e){r.values=e},setLabel:function(e){r.labels=e},normalizeLabelValue:function(){r.labels.forEach(function(e){void 0===r.values[e]&&(r.values[e]=0)})},draw:function(){if(r.values&&r.labels){r.normalizeLabelValue();var e=r.canvas,t=r.context,n=(e.width,e.height),a=r.__getScale(),o=r.values,i=360/Object.values(o).length,l=.9*n,c=n*u.default.round_at(1-.9,1)/2,d=0;r.labels.forEach(function(e,n){t.fillStyle="hsl("+i*n+", 100%, 60%)",t.fillRect(d,c,o[e]*a,l),d+=o[e]*a})}},test:function(){r.context.moveTo(10,10),r.context.lineTo(90,90),r.context.stroke(),r.setValue({a:10,b:20}),r.draw([])},__getScale:function(){var e=0;return Object.values(r.values).forEach(function(t){e+=t}),r.canvas.width/e}};t.default=r},22:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=u(n(5)),o=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var r={appendTask:function(){a.default.showModal()},members:function(){a.default.init();var e=document.querySelector(".members_status");e.classList.remove("hide"),a.default.getModalBack().addEventListener("click",function(){e.classList.add("hide")})},reflection:function(){var e=o.default.get_path(),t=o.default.get_cookie("user_id");window.location.href=e+"/reflection/individual/"+t},github:function(){window.open("https://github.com/touhouota/task_scheduler/issues","_blank")},logout:function(){var e=o.default.get_cookie("user_id"),t=new Date;t.setFullYear(t.getFullYear()-2);var n=["user_id="+e,"path="+o.default.get_path(),"expires="+t.toUTCString()];document.cookie=n.join(";");var a=o.default.get_path();window.location.href=""+a},taskList:function(){var e=o.default.get_path(),t=o.default.get_cookie("user_id");window.location.href=e+"/structure/main/"+t}};t.default=r},33:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=u(n(20)),o=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var r={drawPage:function(e){r.__init(e),r.__getGraphData()},redraw:function(){a.default.values||r.__getGraphData(),r.__drawGraph()},__init:function(e){a.default.init(e)},__getGraphData:function(){var e=o.default.get_cookie("user_id"),t=o.default.get_path()+"/api/individual/"+e;fetch(t).then(function(e){return e.json()}).then(function(e){r.__drawGraph(e.task_info),r.__setLabelValue(e.task_info),r.__setAchiveRate(e.achieve),r.__setTotalActualTime(e.actual_secs)})},__drawGraph:function(e){a.default.setValue(e),a.default.setLabel(["survay","develop","experiment","write"]),a.default.draw()},__setLabelValue:function(e){var t=0;Object.values(e).forEach(function(e){t+=e});["survay","develop","experiment","write"].forEach(function(n){var a=o.default.round_at(e[n]/t*100,1);Number.isNaN(a)&&(a=0),document.getElementById(n).querySelector(".value").textContent=a})},__setAchiveRate:function(e){var t=0;Object.values(e).forEach(function(e){t+=e});var n=o.default.round_at(e[2]/t*100,1);document.getElementById("achieve").querySelector(".value").textContent=n},__setTotalActualTime:function(e){var t=Math.round(e/60),n=Math.round(t/60);t-=60*n;var a=Math.round(n/24),o=t+"分";(n-=24*a)>0&&(o=n+"時間 "+o),a>0&&(o=a+"日 "+o),document.getElementById("work_time").querySelector(".value").textContent=o}};t.default=r},34:function(e,t,n){"use strict";var a=u(n(33)),o=u(n(22));function u(e){return e&&e.__esModule?e:{default:e}}var r=void 0;window.onload=function(){a.default.drawPage("graph"),r=0,window.addEventListener("resize",function(){r>0&&clearTimeout(r),r=setTimeout(function(){a.default.redraw()})}),document.getElementById("task_list").addEventListener("click",o.default.taskList),document.getElementById("github").addEventListener("click",o.default.github),document.getElementById("logout").addEventListener("click",o.default.logout)}},5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(1),u=(a=o)&&a.__esModule?a:{default:a};var r={init:function(){var e=document.createElement("div");e.addEventListener("click",r.closeModal),e.classList.add("modal_back"),document.body.appendChild(e)},backgroundClose:function(){var e=document.querySelector(".modal_back");document.body.removeChild(e)},closeModal:function(){r.backgroundClose(),document.getElementById("modal_area").classList.add("hide"),document.querySelector(".modal").reset()},showModal:function(){r.init(),document.getElementById("modal_area").classList.remove("hide")},getModalBack:function(){return document.querySelector(".modal_back")},getModalData:function(e){var t=new FormData(e);return t.append("user_id",u.default.get_cookie("user_id")),t.append("authenticity_token",u.default.get_token()),t},isModalOpen:function(){return Boolean(r.getModalBack())}};t.default=r}});